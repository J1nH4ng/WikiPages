import{_ as k,C as p,c as r,o as d,aD as n,j as i,G as e,a}from"./chunks/framework.Cvnqwbck.js";const q=JSON.parse('{"title":"Jenkins 物理机安装配置","description":"Jenkins 物理机安装配置文档","frontmatter":{"title":"Jenkins 物理机安装配置","editLink":true,"description":"Jenkins 物理机安装配置文档","layout":"doc","head":[["meta",{"name":"keywords","content":"Jenkins, Physical Machine"}]],"outline":"deep","prev":{"text":null,"link":null},"next":{"text":null,"link":null}},"headers":[],"relativePath":"posts/6513ad9e.md","filePath":"docs/cicd/jenkins/physical/install.md","lastUpdated":1745400460000}'),o={name:"posts/6513ad9e.md"},c={id:"安装-java",tabindex:"-1"},b={id:"安装配置-maven",tabindex:"-1"},g={href:"/files/maven/settings.xml",download:"settings.xml"},u={id:"安装配置-nodejs",tabindex:"-1"},y={id:"安装配置-docker",tabindex:"-1"},m={href:"/files/systemd/docker/docker.socket",download:"docker.socket"},A={href:"/files/systemd/docker/containerd.service",download:"containerd.service"},E={href:"/files/systemd/docker/docker.service",download:"docker.service"},v={href:"/files/docker/daemon.json",download:"daemon.json"},C={id:"安装配置-kubelet",tabindex:"-1"},F={id:"安装配置-jenkins",tabindex:"-1"};function D(f,s,x,w,B,J){const l=p("Icon"),t=p("NolebaseGitContributors"),h=p("NolebaseGitChangelog");return d(),r("div",null,[s[43]||(s[43]=n('<h1 id="jenkins-物理机安装配置" tabindex="-1">Jenkins 物理机安装配置 <a class="header-anchor" href="#jenkins-物理机安装配置" aria-label="Permalink to &quot;Jenkins 物理机安装配置&quot;">​</a></h1><div class="note custom-block github-alert"><p class="custom-block-title">说明：</p><p></p><p>这里的物理机并非传统意义上的物理机，也可以是使用虚拟化技术虚拟出来的一台服务器。</p></div><p>由于这里的 Jenkins 单独使用了一台独立的服务器进行安装配置，所以将发布一个项目所需的依赖安装，打包等操作全部迁移至该台服务器运行。对于使用 k8s 项目的服务而言，还将在这台服务器上进行 Docker 镜像打包和推送至局域网内的 Harbor 镜像仓库操作，并使用 <code>kubectl</code> 远程连接 K8s 集群执行代码包的发布运行。</p><p>主要需要安装配置的软件如下：</p><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_0" checked="true" disabled="true"><label for="cbx_0"> JDK 21 （Jenkins 运行所需）</label></li><li class="task-list-item"><input type="checkbox" id="cbx_1" checked="true" disabled="true"><label for="cbx_1"> JDK 8 （与项目所需 Java 版本保持一致）</label></li><li class="task-list-item"><input type="checkbox" id="cbx_2" checked="true" disabled="true"><label for="cbx_2"> Maven （用于打包 Java 项目）</label></li><li class="task-list-item"><input type="checkbox" id="cbx_3" checked="true" disabled="true"><label for="cbx_3"> NodeJS</label><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_4" checked="true" disabled="true"><label for="cbx_4"> Nvm （用于进行前端 NodeJS 版本切换）</label></li><li class="task-list-item"><input type="checkbox" id="cbx_5" checked="true" disabled="true"><label for="cbx_5"> Pnpm （用于前端代码打包）</label></li></ul></li><li class="task-list-item"><input type="checkbox" id="cbx_6" checked="true" disabled="true"><label for="cbx_6"> Docker （用于镜像制作和推送至私有仓库）</label></li><li class="task-list-item"><input type="checkbox" id="cbx_7" checked="true" disabled="true"><label for="cbx_7"> Kubelet（用于连接 Kubernetes 集群）</label></li><li class="task-list-item"><input type="checkbox" id="cbx_8" checked="true" disabled="true"><label for="cbx_8"> Jenkins</label><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_9" checked="true" disabled="true"><label for="cbx_9"> SSH 登录连接 GitLab 仓库</label></li><li class="task-list-item"><input type="checkbox" id="cbx_10" disabled="true"><label for="cbx_10"> Ansible 免密配置</label></li><li class="task-list-item"><input type="checkbox" id="cbx_11" checked="true" disabled="true"><label for="cbx_11"> 配置镜像源</label></li><li class="task-list-item"><input type="checkbox" id="cbx_12" checked="true" disabled="true"><label for="cbx_12"> 配置插件</label></li></ul></li></ul>',5)),i("h2",c,[s[0]||(s[0]=a("安装 ")),e(l,{icon:"catppuccin:java"}),s[1]||(s[1]=a("Java ")),s[2]||(s[2]=i("a",{class:"header-anchor",href:"#安装-java","aria-label":'Permalink to "安装 <Icon icon="catppuccin:java" />Java"'},"​",-1))]),s[44]||(s[44]=n(`<h3 id="安装-jdk-21" tabindex="-1">安装 JDK 21 <a class="header-anchor" href="#安装-jdk-21" aria-label="Permalink to &quot;安装 JDK 21&quot;">​</a></h3><div class="important custom-block github-alert"><p class="custom-block-title">特别说明：</p><p></p><p>这里的 JDK 21 为 Jenkins 运行所需运行时，不写入环境变量中，在启动 Jenkins 时以绝对路径使用。</p></div><ol><li><p>使用 XFtp 等工具将 JDK 21 的压缩包上传至后段服务器的 <code>/usr/local/src</code> 目录下</p></li><li><p>解压 JDK 21 的压缩包</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">tar</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -zxvf</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> jdk-21_linux-x64.tar.gz</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>移动 JDK 21 的目录至 <code>/usr/local/</code> 目录下</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">mv</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> jdk-21</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/jdk21</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>验证 Java 版本</p><p>使用如下命令查看当前的 Java 版本：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">java</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><h3 id="安装-jdk-8" tabindex="-1">安装 JDK 8 <a class="header-anchor" href="#安装-jdk-8" aria-label="Permalink to &quot;安装 JDK 8&quot;">​</a></h3><div class="important custom-block github-alert"><p class="custom-block-title">特别说明：</p><p></p><p>这里的 JDK 8 与业务应用生产环境使用版本一致，并写入至环境变量中。</p></div><div class="note custom-block github-alert"><p class="custom-block-title">说明：</p><p></p><p>Oracle 公司为了推进 JDK 高版本的使用，对于低版本的 JDK 需要注册登录 Oracle 进行下载。</p><p>这里我们使用下载好地压缩包上传而不是使用 <code>wget</code> 命令进行在线下载配置。</p></div><ol><li><p>使用 XFtp 等工具将 JDK 8 的压缩包上传至后段服务器的 <code>/usr/local/src</code> 目录下</p></li><li><p>解压 JDK 8 的压缩包</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">tar</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -zxvf</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> jdk-8u371-linux-x64.tar.gz</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>移动 JDK 8 的目录至 <code>/usr/local/</code> 目录下</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">mv</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> jdk1.8.0_371</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/jdk8</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>配置环境变量</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">echo</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &#39;PATH=$PATH:/usr/local/jdk8/bin</span></span>
<span class="line"><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">export PATH&#39;</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> &gt;&gt;</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">echo</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &#39;JAVA_HOME=/usr/local/jdk8&#39;</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> &gt;&gt;</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /etc/profile</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>配置完成后，还需要刷新环境变量：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">source</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /etc/profile</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>验证 Java 版本</p><p>使用如下命令查看当前的 Java 版本：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">java</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol>`,7)),i("h2",b,[s[3]||(s[3]=a("安装配置 ")),e(l,{icon:"devicon:maven"}),s[4]||(s[4]=a("Maven ")),s[5]||(s[5]=i("a",{class:"header-anchor",href:"#安装配置-maven","aria-label":'Permalink to "安装配置 <Icon icon="devicon:maven" />Maven"'},"​",-1))]),s[45]||(s[45]=n(`<p>Maven 是一个跨平台的项目管理工具，主要用于管理 Jar 包依赖和一键构建项目。</p><p>可以去<a href="https://maven.apache.org/download.cgi" target="_blank" rel="noreferrer">官网</a>进行下载，也可以选择<a href="https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3" target="_blank" rel="noreferrer">清华源</a>进行下载，这里我们选择 Maven 3.9.9 版本进行使用。</p><h3 id="安装-maven" tabindex="-1">安装 Maven <a class="header-anchor" href="#安装-maven" aria-label="Permalink to &quot;安装 Maven&quot;">​</a></h3><p>安装 Maven 与 Java 类型，下载预编译好地安装包并配置至环境变量即可。</p><ol><li><p>下载 Maven 3.9.9</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">cd</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/src</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">wget</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> https://archive.apache.org/dist/maven/maven-3/3.9.9/binaries/apache-maven-3.9.9-bin.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">tar</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -zxvf</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> apache-maven-3.9.9-bin.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">cp</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -r</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/src/apache-maven-3.9.9</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/maven3.9</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p>配置环境变量</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">echo</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &#39;</span></span>
<span class="line"><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">PATH=$PATH:/usr/local/maven3.9/bin</span></span>
<span class="line"><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">export PATH&#39;</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> &gt;&gt;</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-light-font-style:italic;--shiki-dark:#908CAA;--shiki-dark-font-style:italic;">#</span><span style="--shiki-light:#9893A5;--shiki-light-font-style:italic;--shiki-dark:#6E6A86;--shiki-dark-font-style:italic;"> 刷新环境变量</span></span>
<span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">source</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /etc/profile</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ol><h3 id="配置-maven" tabindex="-1">配置 Maven <a class="header-anchor" href="#配置-maven" aria-label="Permalink to &quot;配置 Maven&quot;">​</a></h3><p>Maven 配置主要需要配置如下内容：</p><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_13" checked="true" disabled="true"><label for="cbx_13"> 修改第三方仓库为国内镜像源</label></li><li class="task-list-item"><input type="checkbox" id="cbx_14" checked="true" disabled="true"><label for="cbx_14"> 配置私有 Nexus 仓库认证配置</label></li><li class="task-list-item"><input type="checkbox" id="cbx_15" checked="true" disabled="true"><label for="cbx_15"> 配置 HTTP 代理认证用于访问私有 Nexus 仓库</label></li></ul>`,8)),i("p",null,[s[7]||(s[7]=a("Maven 的配置文件为安装目录下的 ")),i("a",g,[s[6]||(s[6]=i("code",null,"/conf/setting.xml",-1)),e(l,{icon:"line-md:downloading-loop"})]),s[8]||(s[8]=a(" 文件："))]),s[46]||(s[46]=n(`<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">vim</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/maven3.9/conf/setting.xml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol><li><p>修改第三方仓库为国内镜像源</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">mirror</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">     &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">id</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">aliyunmaven</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">id</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">     &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">mirrorOf</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">*</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">mirrorOf</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">     &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">name</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">阿里云仓库</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">name</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">     &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">url</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">https://maven.aliyun.com/repository/public</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">url</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">mirror</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>配置私有 Nexus 仓库认证配置</p><p>server 块部分：</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">server</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">     &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">id</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">Nexus</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">id</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">     &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">username</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">\${username}</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">username</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">     &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">password</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">\${password}</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">password</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">server</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>mirror 块部署：</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">mirror</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">     &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">id</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">Nexus</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">id</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">     &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">mirrorOf</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">*</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">mirrorOf</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">     &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">url</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">https://nexus.4r3al.team/repository/maven-public/</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">url</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">mirror</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>配置 HTTP 代理认证用于访问私有 Nexus 仓库</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">proxies</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">   &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">proxy</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;"> 	 &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">id</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">http-proxy</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">id</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;"> 	 &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">active</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">true</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">active</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;"> 	 &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">protocol</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">http</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">protocol</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">      &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">host</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">proxy.4r3al.team</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">host</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;"> 	 &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">port</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">80</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">port</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">   &lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">proxy</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">   &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">proxy</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">      &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">id</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">http-proxy</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">id</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">      &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">active</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">true</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">active</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">      &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">protocol</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">https</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">protocol</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">      &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">host</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">proxy.4r3al.team</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">host</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">      &lt;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">port</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">443</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">port</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">   &lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">proxy</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&lt;/</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">proxies</span><span style="--shiki-light:#9893A5;--shiki-dark:#6E6A86;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ol>`,2)),i("h2",u,[s[9]||(s[9]=a("安装配置 ")),e(l,{icon:"logos:nodejs-icon-alt"}),s[10]||(s[10]=a("NodeJS ")),s[11]||(s[11]=i("a",{class:"header-anchor",href:"#安装配置-nodejs","aria-label":'Permalink to "安装配置 <Icon icon="logos:nodejs-icon-alt" />NodeJS"'},"​",-1))]),s[47]||(s[47]=i("h3",{id:"安装-nvm",tabindex:"-1"},[a("安装 NVM "),i("a",{class:"header-anchor",href:"#安装-nvm","aria-label":'Permalink to "安装 NVM"'},"​")],-1)),s[48]||(s[48]=i("p",null,"由于前端使用的 NodeJS 版本的多样性，为了在后续使用 Jenkins 发布前端项目时方便快速切换至合适的 NodeJS 版本，这里使用 NVM 来管理多个 NodeJS 版本。",-1)),i("ol",null,[i("li",null,[s[15]||(s[15]=i("p",null,"下载 NVM",-1)),i("p",null,[s[12]||(s[12]=a("NVM 发布在其 ")),e(l,{icon:"logos:github"}),s[13]||(s[13]=a(" 仓库上，访问地址为：")),s[14]||(s[14]=i("a",{href:"https://github.com/nvm-sh/nvm",target:"_blank",rel:"noreferrer"},"NVM",-1))]),s[16]||(s[16]=n(`<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">cd</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/src</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">wget</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> https://github.com/nvm-sh/nvm/archive/refs/tags/v0.40.2.tar.gz</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -O</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> nvm-0.40.2.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">tar</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -zxvf</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> nvm-0.40.2.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">mv</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> nvm-0.40.2</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/nvm0.40</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div>`,1))]),s[17]||(s[17]=n(`<li><p>配置到 Bash 的 Profile 文件中</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">echo</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &quot;source /usr/local/nvm0.40/nvm.sh&quot;</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> &gt;&gt;</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> ~/.bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">source</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> ~/.bashrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>安装多版本 NodeJS</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">nvm</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> install</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> v14.21.3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">nvm</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> install</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> v16.20.2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">nvm</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> install</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> v18.20.5</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="note custom-block github-alert"><p class="custom-block-title">说明：</p><p></p><p>NVM 可能未指定 NodeJS 仓库，从而导致下载失败，可以使用如下命令进行安装：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">NVM_NODEJS_ORG_MIRROR</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">=</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">https://nodejs.org/dist</span><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;"> nvm</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> install</span><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;"> 16.14.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></li>`,2))]),s[49]||(s[49]=n('<h3 id="安装-pnpm" tabindex="-1">安装 Pnpm <a class="header-anchor" href="#安装-pnpm" aria-label="Permalink to &quot;安装 Pnpm&quot;">​</a></h3><p>安装完 NodeJS 后，可以使用 NodeJS 自带的 npm 包管理器安装 pnpm。同时，为了保证前端第三方依赖包的兼容性，指定 pnpm 的版本为 8.0.0。</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">npm</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> install</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -g</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> pnpm@8.0.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>安装完成后，使用如下命令设置 pnpm 的源为国内镜像源：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">pnpm</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> config</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> set</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> registry</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> https://registry.npmmirror.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block github-alert"><p class="custom-block-title">注意：</p><p></p><p>使用 NVM 切换 NodeJS 版本后，仍然需要重新执行上述命令，各个 NodeJS 版本之间的配置是独立的。</p></div>',6)),i("h2",y,[s[18]||(s[18]=a("安装配置 ")),e(l,{icon:"devicon:docker"}),s[19]||(s[19]=a("Docker ")),s[20]||(s[20]=i("a",{class:"header-anchor",href:"#安装配置-docker","aria-label":'Permalink to "安装配置 <Icon icon="devicon:docker" />Docker"'},"​",-1))]),s[50]||(s[50]=n('<h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><h4 id="yum-安装" tabindex="-1">YUM 安装 <a class="header-anchor" href="#yum-安装" aria-label="Permalink to &quot;YUM 安装&quot;">​</a></h4><ol><li><p>先添加 Docker 官方仓库</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">yum-config-manager</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> --add-repo</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> https://download.docker.com/linux/centos/docker-ce.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>修改源文件</p><p>由于并不是原生的 CentOS 系统，所以需要手动指定源文件中的版本以下载正确的 Docker</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">vim</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /etc/yum.repos.d/docker-ce.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>执行如下命令批量查询替换</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">:1,$s/\\$releasever/7/g</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>查询 Docker 版本</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">yum</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> list</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> docker-ce</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> --showduplicates</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> |</span><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;"> sort</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -r</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>安装 Docker</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">yum</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -y</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> install</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> docker-ce</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>启用 Docker</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">systemctl</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> enable</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> docker</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> --now</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><h4 id="二进制安装" tabindex="-1">二进制安装 <a class="header-anchor" href="#二进制安装" aria-label="Permalink to &quot;二进制安装&quot;">​</a></h4>',4)),i("ol",null,[s[28]||(s[28]=n(`<li><p>下载 Docker 二进制文件</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">cd</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/src/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">wget</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -c</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> https://download.docker.com/linux/static/stable/x86_64/docker-28.1.1.tgz</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>解压该文件并授予权限</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">tar</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -zxvf</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> docker-28.1.1.tgz</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">chown</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> root:root</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> docker/</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">*</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>移动至环境变量中</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">cp</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -p</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> docker/</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">*</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/bin/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block github-alert"><p class="custom-block-title">小技巧：</p><p></p><p>cp -p 命令的 <code>-p</code> 选项表示保持源文件属性，包括权限、时间戳等。</p></div></li><li><p>创建 Docker 用户组</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">groupadd</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li>`,4)),i("li",null,[s[27]||(s[27]=i("p",null,"配置 Docker 相关文件服务",-1)),i("ol",null,[i("li",null,[i("p",null,[i("a",m,[s[21]||(s[21]=a("Docker Socket 文件")),e(l,{icon:"line-md:downloading-loop"})])]),s[22]||(s[22]=n(`<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">vim</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/lib/systemd/system/docker.socket</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>写入如下内容：</p><div class="language-ini vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">[</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">Unit</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Description</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">Docker Socket for the API</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">[</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">Socket</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">ListenStream</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">/var/run/docker.sock</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">SocketMode</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">0660</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">SocketUser</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">root</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">SocketGroup</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">[</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">Install</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">WantedBy</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">sockets.target</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div>`,3))]),i("li",null,[i("p",null,[i("a",A,[s[23]||(s[23]=a("Containerd Service 文件 ")),e(l,{icon:"line-md:downloading-loop"})])]),s[24]||(s[24]=n(`<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">vim</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/lib/systemd/system/containerd.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>写入如下内容：</p><div class="language-ini vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">[</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">Unit</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Description</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">containerd container runtime</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Documentation</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">https://containerd.io</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">After</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">network.target local-fs.target</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">[</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">Service</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">ExecStartPre</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">-/sbin/modprobe overlay</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">ExecStart</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">/usr/bin/containerd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Type</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">notify</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Delegate</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">yes</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">KillMode</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">process</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Restart</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">always</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">RestartSec</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-light-font-style:italic;--shiki-dark:#908CAA;--shiki-dark-font-style:italic;">#</span><span style="--shiki-light:#9893A5;--shiki-light-font-style:italic;--shiki-dark:#6E6A86;--shiki-dark-font-style:italic;"> Having non-zero Limit*s causes performance problems due to accounting overhead</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-light-font-style:italic;--shiki-dark:#908CAA;--shiki-dark-font-style:italic;">#</span><span style="--shiki-light:#9893A5;--shiki-light-font-style:italic;--shiki-dark:#6E6A86;--shiki-dark-font-style:italic;"> in the kernel. We recommend using cgroups to do container-local accounting.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">LimitNOFILE</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">infinity</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">LimitNPROC</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">infinity</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">LimitCORE</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">infinity</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-light-font-style:italic;--shiki-dark:#908CAA;--shiki-dark-font-style:italic;">#</span><span style="--shiki-light:#9893A5;--shiki-light-font-style:italic;--shiki-dark:#6E6A86;--shiki-dark-font-style:italic;"> Comment TasksMax if your systemd version does not support it.</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-light-font-style:italic;--shiki-dark:#908CAA;--shiki-dark-font-style:italic;">#</span><span style="--shiki-light:#9893A5;--shiki-light-font-style:italic;--shiki-dark:#6E6A86;--shiki-dark-font-style:italic;"> Only systemd 226 and later support this option.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">TasksMax</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">infinity</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">OOMScoreAdjust</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">-999</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">[</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">Install</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">WantedBy</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">multi-user.target</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div>`,3))]),i("li",null,[i("p",null,[i("a",E,[s[25]||(s[25]=a("Docker Service 文件")),e(l,{icon:"line-md:downloading-loop"})])]),s[26]||(s[26]=n(`<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">vim</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/lib/systemd/system/docker.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>写入如下内容：</p><div class="language-ini vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">[</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">Unit</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Description</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">Docker Application Container Engine</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Documentation</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">https://docs.docker.com</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">After</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">network-online.target docker.socket firewalld.service containerd.service</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Wants</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">network-online.target</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Requires</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">docker.socket containerd.service</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">[</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">Service</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Type</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">notify</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">ExecStart</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">/usr/bin/dockerd -H fd:// --</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">containerd</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">/run/containerd/containerd.sock</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">ExecReload</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">/bin/kill -s HUP $MAINPID</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">TimeoutStartSec</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">0</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">RestartSec</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">2</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Restart</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">always</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">StartLimitBurst</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">StartLimitInterval</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">60s</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">LimitNOFILE</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">infinity</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">LimitNPROC</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">infinity</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">LimitCORE</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">infinity</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">TasksMax</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">infinity</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">Delegate</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">yes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">KillMode</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">process</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">OOMScoreAdjust</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">-500</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">[</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">Install</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">WantedBy</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">=</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">multi-user.target</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div>`,3))])])]),s[29]||(s[29]=n(`<li><p>配置完成后启动 Docker 服务</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">systemctl</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">systemctl</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> enable</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> docker</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> --now</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li>`,1))]),s[51]||(s[51]=n('<h3 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h3><p>Docker 安装完成之后，还需要配置 <code>daemon.json</code> 文件，用于实现如下修改：</p><ul><li>存储位置修改</li><li>Docker 容器内 IP 变更</li><li>日志大小变更</li><li>私有仓库配置</li><li>镜像仓库配置</li></ul>',3)),i("p",null,[s[31]||(s[31]=a("修改 ")),i("a",v,[s[30]||(s[30]=i("code",null,"daemon.json",-1)),e(l,{icon:"line-md:downloading-loop"})]),s[32]||(s[32]=a(" 文件，如果没有则创建："))]),s[52]||(s[52]=n(`<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">mkdir</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -p</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /etc/docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">vim</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /etc/docker/daemon.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>写入如下内容：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">{</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">  &quot;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">data-root</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">:</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &quot;/data/docker&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">,</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">  &quot;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">registry-mirrors</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">:</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;"> [</span></span>
<span class="line"><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">    &quot;https://dp.4r3al.team&quot;</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">  ],</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">  &quot;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">bip</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">:</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &quot;172.18.1.1/24&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">,</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">  &quot;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">insecure-registries</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">:</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;"> [</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">&quot;192.168.50.120:3380&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">],</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">  &quot;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">log-opts</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">:</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;"> {</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">    &quot;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">max-size</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">:</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &quot;150m&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">,</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">    &quot;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">max-file</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">:</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">&quot;3&quot;</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">  },</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">  &quot;</span><span style="--shiki-light:#56949F;--shiki-dark:#9CCFD8;">exec-opts</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">:</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;"> [</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">&quot;native.cgroupdriver=systemd&quot;</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>`,3)),i("h2",C,[s[33]||(s[33]=a("安装配置 ")),e(l,{icon:"devicon:kubernetes"}),s[34]||(s[34]=a("Kubelet ")),s[35]||(s[35]=i("a",{class:"header-anchor",href:"#安装配置-kubelet","aria-label":'Permalink to "安装配置 <Icon icon="devicon:kubernetes" />Kubelet"'},"​",-1))]),s[53]||(s[53]=n(`<p>Kubelet 连接远程的 Kubernetes 集群，需要用于确保如下内容：</p><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_16" checked="true" disabled="true"><label for="cbx_16"> 不能比 kube-apiserver 版本高</label></li><li class="task-list-item"><input type="checkbox" id="cbx_17" checked="true" disabled="true"><label for="cbx_17"> 最多只落后 kube-apiserver 两个次要版本</label></li></ul><p>所以，为了保证可用，从需要连接的 k8s 集群的其中一台 master 服务器上下载其集群使用的 kubelet 软件，并安装至 Jenkins 服务器上。</p><h3 id="安装-kubelet" tabindex="-1">安装 Kubelet <a class="header-anchor" href="#安装-kubelet" aria-label="Permalink to &quot;安装 Kubelet&quot;">​</a></h3><ol><li><p>下载 k8s 集群其中一台 master 节点上的 kubelet 软件和连接验证软件</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">sz</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/bin/kubelet</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">sz</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /root/.kube/config</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>上传这两个文件至 Jenkins 服务器上，为了多集群的连接配置，创建特定的目录进行区分：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">mkdir</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -p</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /data/k8s/</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">\${</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">PROJECT_NAME</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">/bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-light-font-style:italic;--shiki-dark:#908CAA;--shiki-dark-font-style:italic;">#</span><span style="--shiki-light:#9893A5;--shiki-light-font-style:italic;--shiki-dark:#6E6A86;--shiki-dark-font-style:italic;"> 上传 kubelet 软件</span></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">chmod</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> +x</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /data/k8s/</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">\${</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">PROJECT_NAME</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">/bin/kubelet</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">mkdir</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -p</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /data/k8s/</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">\${</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">PROJECT_NAME</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">/config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-light-font-style:italic;--shiki-dark:#908CAA;--shiki-dark-font-style:italic;">#</span><span style="--shiki-light:#9893A5;--shiki-light-font-style:italic;--shiki-dark:#6E6A86;--shiki-dark-font-style:italic;"> 上传连接验证文件</span></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">mv</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /data/k8s/</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">\${</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">PROJECT_NAME</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">/config/config</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /data/k8s/</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">\${</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">PROJECT_NAME</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">/config/</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">\${</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">PROJECT_NAME</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">.config</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>上传完成后，进行连接测试：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">/data/k8s/$</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;">{PROJECT_NAME}</span><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">/bin/kubectl</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> --server=https://</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">\${</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">k8s-lb-ip</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">:6443</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> --kubeconfig=/data/k8s/</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">\${</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">PROJECT_NAME</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">/config/</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">\${</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">PROJECT_NAME</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;">.config</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> get</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> nodes</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol>`,5)),i("h2",F,[s[36]||(s[36]=a("安装配置 ")),e(l,{icon:"devicon:jenkins"}),s[37]||(s[37]=a("Jenkins ")),s[38]||(s[38]=i("a",{class:"header-anchor",href:"#安装配置-jenkins","aria-label":'Permalink to "安装配置 <Icon icon="devicon:jenkins" />Jenkins"'},"​",-1))]),s[54]||(s[54]=i("h3",{id:"安装-jenkins",tabindex:"-1"},[a("安装 Jenkins "),i("a",{class:"header-anchor",href:"#安装-jenkins","aria-label":'Permalink to "安装 Jenkins"'},"​")],-1)),i("p",null,[s[39]||(s[39]=a("下载 Jenkins 的 ")),e(l,{icon:"logos:redhat"}),s[40]||(s[40]=a(" 发行版的安装包，国内的服务器可以使用")),s[41]||(s[41]=i("a",{href:"https://mirrors.tuna.tsinghua.edu.cn/jenkins/redhat/",target:"_blank",rel:"noreferrer"},"清华源",-1)),s[42]||(s[42]=a("进行下载："))]),s[55]||(s[55]=n(`<div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">cd</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /usr/local/src</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">wget</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> https://mirrors.tuna.tsinghua.edu.cn/jenkins/redhat/jenkins-2.506-1.1.noarch.rpm</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> --no-check-certificate</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下载完成后，使用 <code>rpm</code> 命令进行安装：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">rpm</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -ivh</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> jenkins-2.506-1.1.noarch.rpm</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="配置-jenkins" tabindex="-1">配置 Jenkins <a class="header-anchor" href="#配置-jenkins" aria-label="Permalink to &quot;配置 Jenkins&quot;">​</a></h3><p>安装完成 Jenkins 后，还需要配置如下内容：</p><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_18" checked="true" disabled="true"><label for="cbx_18"> 配置 Jenkins 启动文件</label></li><li class="task-list-item"><input type="checkbox" id="cbx_19" checked="true" disabled="true"><label for="cbx_19"> 配置插件镜像源</label></li></ul><h4 id="配置-jenkins-启动文件" tabindex="-1">配置 Jenkins 启动文件 <a class="header-anchor" href="#配置-jenkins-启动文件" aria-label="Permalink to &quot;配置 Jenkins 启动文件&quot;">​</a></h4><p>具体修改的内容如下：</p><div class="language-diff vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon has-diff vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">...</span></span>
<span class="line"></span>
<span class="line diff remove"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">User=jenkins</span></span>
<span class="line diff add"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">User=root</span></span>
<span class="line diff remove"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">Group=jenkins</span></span>
<span class="line diff add"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">Group=root</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">...</span></span>
<span class="line"></span>
<span class="line diff remove"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">Environment=&quot;JENKINS_HOME=/var/lib/jenkins&quot;</span></span>
<span class="line diff add"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">Environment=&quot;JENKINS_HOME=/data/jenkins&quot;</span></span>
<span class="line diff remove"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">WorkingDirectory=/var/lib/jenkins</span></span>
<span class="line diff add"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">WorkingDirectory=/data/jenkins</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">...</span></span>
<span class="line"></span>
<span class="line diff add"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">Environment=&quot;JAVA_HOME=/usr/local/jdk21&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>配置修改完成后，重新载入配置文件：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">systemctl</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> daemon-reload</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>由于修改了 Jenkins 的需要目录，需要手动创建该目录：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">mkdir</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /data/jenkins</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>创建完成后，启动 Jenkins 服务：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">systemctl</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> enable</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> jenkins</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> --now</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="note custom-block github-alert"><p class="custom-block-title">备注：</p><p></p><p>Jenkins 的默认密码查看：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">cat</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /data/jenkins/secrets/initialAdminPassword</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div><h4 id="配置插件镜像源" tabindex="-1">配置插件镜像源 <a class="header-anchor" href="#配置插件镜像源" aria-label="Permalink to &quot;配置插件镜像源&quot;">​</a></h4><div class="important custom-block github-alert"><p class="custom-block-title">特别说明：</p><p></p><p>Jenkins 最新的镜像源已没有 <code>update-center.json</code> 文件，所以需要手动修改配置，仅针对最新版 Jenkins 生效。</p></div><p>手动下载 <code>update-center.json</code> 文件：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">wget</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> https://updates.jenkins.io/update-center.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>下载完成之后的 <code>update-center.json</code> 文件内容如下：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">updateCenter.post(</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">  {</span></span>
<span class="line"><span style="--shiki-light:#B4637A;--shiki-dark:#EB6F92;">    #</span><span style="--shiki-light:#B4637A;--shiki-dark:#EB6F92;"> 此处省略</span></span>
<span class="line"><span style="--shiki-light:#B4637A;--shiki-dark:#EB6F92;">    ...</span></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">  }</span></span>
<span class="line"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>对于我们需要的文件内容而言，多了部分内容，将其删除掉：</p><div class="language-diff vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon has-diff vp-code" tabindex="0"><code><span class="line diff remove"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">updateCenter.post(</span></span>
<span class="line"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">  {</span></span>
<span class="line"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">    ...</span></span>
<span class="line"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">  }</span></span>
<span class="line diff remove"><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="tip custom-block github-alert"><p class="custom-block-title">注意：</p><p></p><p>下载的文件内容是在同一行内显示的，这里为了方便阅读，进行了分行，请注意识别括号。</p></div><p>修改完成文件内容后，上传至 Jenkins 安装目录下的 updates 目录，如果没有，可以手动创建：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">mkdir</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /data/jenkins/updates</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B4637A;--shiki-light-font-style:italic;--shiki-dark:#EB6F92;--shiki-dark-font-style:italic;">cd</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /data/jenkins/updates</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#797593;--shiki-light-font-style:italic;--shiki-dark:#908CAA;--shiki-dark-font-style:italic;">#</span><span style="--shiki-light:#9893A5;--shiki-light-font-style:italic;--shiki-dark:#6E6A86;--shiki-dark-font-style:italic;"> 上传文件</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上传成功后将该文件重新命令为 <code>default.json</code> ：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">mv</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> update-center.json</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> default.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>修改文件内部的下载地址为国内下载地址，提高下载速度：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">sed</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -i</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &#39;s#updates.jenkins.io/download/plugins#mirrors.tuna.tsinghua.edu.cn/jenkins/plugins#g&#39;</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> default.json</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;"> &amp;&amp;</span><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;"> sudo</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> sed</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -i</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &#39;s#www.google.com#www.baidu.com#g&#39;</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> default.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>配置完成后，重启 Jenkins 生效：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">systemctl</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> restart</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> jenkins</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="配置-ssh-登录-gitlab-仓库" tabindex="-1">配置 SSH 登录 GitLab 仓库 <a class="header-anchor" href="#配置-ssh-登录-gitlab-仓库" aria-label="Permalink to &quot;配置 SSH 登录 GitLab 仓库&quot;">​</a></h4><p>为了可以通过 SSH 方式拉取业务代码，需要配置 SSH-Keygen 进行访问认证<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>。</p><p>使用如下命令生成 ssh-keygen：</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-VsCoQ" id="tab-ztowlX1" checked><label data-title="支持新算法" for="tab-ztowlX1">支持新算法</label><input type="radio" name="group-VsCoQ" id="tab-H_Gb_UL"><label data-title="不支持新算法" for="tab-H_Gb_UL">不支持新算法</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">ssh-keygen</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -t</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> ed25519</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -C</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &quot;jenkins@mail.4r3al.team&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">ssh-keygen</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -t</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> rsa</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -b</span><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;"> 4096</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -C</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> &quot;jenkins@mail.4r3al.team&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><p>将生成的公钥文件（以 .pub 结尾的文件）复制到你的代码仓库的密钥配置处<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>。</p><h4 id="配置-ansible-免密" tabindex="-1">配置 Ansible 免密 <a class="header-anchor" href="#配置-ansible-免密" aria-label="Permalink to &quot;配置 Ansible 免密&quot;">​</a></h4><p>Jenkins 服务器打包完成后，需要通过 Ansible 来进行代码包的分发，这需要配置 Ansible 以便于可以登录应用服务器。</p><p>并且，为了安全起见，不使用 root 用户来登录应用服务器，而使用 nginx 用户来进行登录。</p><ol><li><p>安装 Ansible</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">yum</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> install</span><span style="--shiki-light:#286983;--shiki-dark:#3E8FB0;"> -y</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> ansible</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>配置 Ansible Hosts 文件</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">vim</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> /etc/ansible/hosts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>写入如下内容：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">[</span><span style="--shiki-light:#575279;--shiki-dark:#E0DEF4;">web</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">]</span></span>
<span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">192.168.50.2</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> ansible_ssh_user=nginx</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> ansible_ssh_pass=</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">\${</span><span style="--shiki-light:#575279;--shiki-light-font-style:italic;--shiki-dark:#E0DEF4;--shiki-dark-font-style:italic;">password</span><span style="--shiki-light:#797593;--shiki-dark:#908CAA;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol><h3 id="web-界面配置" tabindex="-1">Web 界面配置 <a class="header-anchor" href="#web-界面配置" aria-label="Permalink to &quot;Web 界面配置&quot;">​</a></h3><p>在 Jenkins 成功运行后，可以在同一局域网段内的服务器上，通过浏览器访问 <code>http://&lt;jenkins_ip&gt;:8080</code> 进行后续配置：</p><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_20" checked="true" disabled="true"><label for="cbx_20"> 插件安装</label></li><li class="task-list-item"><input type="checkbox" id="cbx_21" disabled="true"><label for="cbx_21"> 创建任务</label></li></ul><h4 id="插件安装" tabindex="-1">插件安装 <a class="header-anchor" href="#插件安装" aria-label="Permalink to &quot;插件安装&quot;">​</a></h4><p>安装如下所示的插件：</p><ul><li>GitLab、Gitlab Authentication、Gitlab Logo、Gitlab Hook、Git Parameter</li><li>Locale、Localization: Chinese(Simpilified)</li><li>Blue Ocean</li><li>Role-based Authorization Strategy</li><li>Pipeline: Stage View、Build Pipeline</li><li>Version Number</li><li>Build With Parameters</li></ul><p>所有插件安装完成后，重启 Jenkins 生效：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes rose-pine-dawn rose-pine-moon vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D7827E;--shiki-dark:#EA9A97;">systemctl</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> restart</span><span style="--shiki-light:#EA9D34;--shiki-dark:#F6C177;"> jenkins</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,50)),e(t),e(h),s[56]||(s[56]=n('<hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://docs.github.com/zh/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noreferrer">生成新的 SSH 密钥</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://docs.github.com/zh/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account" target="_blank" rel="noreferrer">新增 SSH 密钥到 GitHub 帐户</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p></li></ol></section>',2))])}const P=k(o,[["render",D]]);export{q as __pageData,P as default};
